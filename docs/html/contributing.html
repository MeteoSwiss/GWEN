<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Contributing &#8212; WeatherGraphNet 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Credits" href="authors.html" />
    <link rel="prev" title="Modules" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading">¶</a></h1>
<p class="linemarker linemarker-5">Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-10">You can contribute in many ways.</p>
<section id="report-bugs">
<h3>Report Bugs<a class="headerlink" href="#report-bugs" title="Permalink to this heading">¶</a></h3>
<p class="linemarker linemarker-15">Report bugs as <a class="reference external" href="https://github.com/MeteoSwiss-APN/weathergraphnet/issues">GitHub issues</a>.</p>
<p class="linemarker linemarker-17">If you are reporting a bug, please include</p>
<ul class="simple">
<li><p class="linemarker linemarker-20">your operating system name and version,</p></li>
<li><p class="linemarker linemarker-21">any details about your local setup that might be helpful in troubleshooting, and</p></li>
<li><p class="linemarker linemarker-22">detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h3>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this heading">¶</a></h3>
<p class="linemarker linemarker-27">Look through the <a class="reference external" href="https://github.com/MeteoSwiss-APN/weathergraphnet/issues">GitHub issues</a> for bugs. Anything tagged with “bug” and “help wanted” is open to whoever wants to implement it.</p>
</section>
<section id="implement-features">
<h3>Implement Features<a class="headerlink" href="#implement-features" title="Permalink to this heading">¶</a></h3>
<p class="linemarker linemarker-32">Look through the  <a class="reference external" href="https://github.com/MeteoSwiss-APN/weathergraphnet/issues">GitHub issues</a> for features. Anything tagged with “enhancement” and “help wanted” is open to whoever wants to implement it.</p>
</section>
<section id="write-documentation">
<h3>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this heading">¶</a></h3>
<p class="linemarker linemarker-37">WeatherGraphNet could always use more documentation, whether as part of the official WeatherGraphNet docs, in docstrings — or even on the web in blog posts, articles, and such.</p>
</section>
<section id="submit-feedback">
<h3>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permalink to this heading">¶</a></h3>
<p class="linemarker linemarker-42">The best way to send feedback is to file a <a class="reference external" href="https://github.com/MeteoSwiss-APN/weathergraphnet/issues">GitHub issue</a>.</p>
<p class="linemarker linemarker-44">If you are proposing a feature,</p>
<ul class="simple">
<li><p class="linemarker linemarker-47">explain in detail how it would work;</p></li>
<li><p class="linemarker linemarker-48">keep the scope as narrow as possible, to make it easier to implement; and</p></li>
<li><p class="linemarker linemarker-49">remember that this is a volunteer-driven project, and that contributions are welcome! :)</p></li>
</ul>
</section>
</section>
<section id="get-started">
<h2>Get Started!<a class="headerlink" href="#get-started" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-54">Ready to contribute? Here’s how to set up <code class="docutils literal notranslate"><span class="pre">weathergraphnet</span></code> for local development.</p>
<ol class="arabic">
<li><p class="linemarker linemarker-58">Fork the <code class="docutils literal notranslate"><span class="pre">`weathergraphnet</span></code> repo &lt;<a class="reference external" href="https://github.com/">https://github.com/</a>&gt;`_ on GitHub.</p></li>
<li><p class="linemarker linemarker-61">Clone your fork locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:your_name_here/weathergraphnet.git
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-68">Create a virtual environment and install the dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>weathergraphnet/
./tools/setup_env.sh
</pre></div>
</div>
<p class="linemarker linemarker-75">This will create a conda environment named <code class="docutils literal notranslate"><span class="pre">weathergraphnet</span></code> (change with <code class="docutils literal notranslate"><span class="pre">-n</span></code>) and install the pinned runtime and development dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code>.</p>
<p class="linemarker linemarker-77">Install the package itself in editable mode.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>weathergraphnet
pip<span class="w"> </span>install<span class="w"> </span>--editable<span class="w"> </span>.
</pre></div>
</div>
<p class="linemarker linemarker-84">Use <code class="docutils literal notranslate"><span class="pre">-u</span></code> to get the newest package versions (unpinned dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code>), and additionally <code class="docutils literal notranslate"><span class="pre">-e</span></code> to update the environment files.</p>
</li>
<li><p class="linemarker linemarker-87">Create a branch for local development:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
<p class="linemarker linemarker-93">Now you can make your changes locally.</p>
</li>
<li><p class="linemarker linemarker-96">When you’re done with a change, format and check the code using various installed tools like <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">isort</span></code>, <code class="docutils literal notranslate"><span class="pre">mypy</span></code>, <code class="docutils literal notranslate"><span class="pre">flake8</span></code> or <code class="docutils literal notranslate"><span class="pre">pylint</span></code>. Those that are set up as pre-commit hooks can be run together with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>run<span class="w"> </span>-a
</pre></div>
</div>
<p class="linemarker linemarker-102">Next, ensure that the code does what it is supposed to do by running the tests with pytest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-109">Commit your changes and push your branch to GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;fixed this and did that&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
</li>
<li><p class="linemarker linemarker-118">Submit a pull request through the GitHub website.</p></li>
</ol>
</section>
<section id="pull-request-guidelines">
<h2>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-123">Before you submit a pull request, check that it meets these guidelines:</p>
<ol class="arabic simple">
<li><p class="linemarker linemarker-126">The pull request should include tests.</p></li>
<li><p class="linemarker linemarker-127">If the pull request adds functionality, the docs should be updated. Put your new functionality into a function with a docstring, and add the feature to the list in <code class="docutils literal notranslate"><span class="pre">README.md</span></code>.</p></li>
<li><p class="linemarker linemarker-128">The pull request should work for Python 3.6 and 3.7, and for PyPy. Make sure that the tests pass for all supported Python versions.</p></li>
</ol>
</section>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-133">For a subset of tests or a specific test, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>tests.test_weathergraphnet
pytest<span class="w"> </span>tests.test_weathergraphnet/test_feature::test_edge_case
</pre></div>
</div>
</section>
<section id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-143">In order to release a new version of your project, follow these steps:</p>
<ul class="simple">
<li><p class="linemarker linemarker-146">Make sure everything is committed, cleaned up and validating (duh!). Don’t forget to keep track of the changes in <code class="docutils literal notranslate"><span class="pre">HISTORY.md</span></code>.</p></li>
<li><p class="linemarker linemarker-147">Increase the version number that is hardcoded in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> (and only there) and commit.</p></li>
<li><p class="linemarker linemarker-148">Either create a (preferentially annotated) tag with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">tag</span></code>, or directly create a release on GitHub.</p></li>
</ul>
</section>
<section id="project-structure">
<h2>Project Structure<a class="headerlink" href="#project-structure" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-153">Following is a description of the most important files and folders in the project in alphabetic order.</p>
<ul class="simple">
<li><p class="linemarker linemarker-156"><cite>.github/workflows/</cite>: [GitHub Actions](<a class="reference external" href="https://docs.github.com/en/actions">https://docs.github.com/en/actions</a>) workflows, e.g., checks that are run when certain branches are pushed.</p></li>
<li><p class="linemarker linemarker-157"><code class="docutils literal notranslate"><span class="pre">docs/</span></code>: Documentation.</p></li>
<li><p class="linemarker linemarker-158"><code class="docutils literal notranslate"><span class="pre">jenkins/</span></code>: Jenkins setup.</p></li>
<li><p class="linemarker linemarker-159"><code class="docutils literal notranslate"><span class="pre">requirements/</span></code>: Project dependencies and environment</p>
<ul>
<li><p class="linemarker linemarker-161"><code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>: Full tree of runtime and development dependencies with fully specified (‘pinned’) version numbers; created with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code>.</p></li>
<li><p class="linemarker linemarker-162"><code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code>: Top-level runtime and development dependencies with minimal version restrictions (typically a minimum version or a version range); kept manually.</p></li>
</ul>
</li>
<li><p class="linemarker linemarker-164"><code class="docutils literal notranslate"><span class="pre">src/weathergraphnet/</span></code>: Source code of the project package.</p></li>
<li><p class="linemarker linemarker-165"><code class="docutils literal notranslate"><span class="pre">tests/test_weathergraphnet/</span></code>: Unit tests of the project package; run with <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.</p></li>
<li><p class="linemarker linemarker-166"><code class="docutils literal notranslate"><span class="pre">tools/</span></code>: Scripts primarily for development</p>
<ul>
<li><p class="linemarker linemarker-168"><code class="docutils literal notranslate"><span class="pre">run-mypy.sh</span></code>: Run script for the static type checker <code class="docutils literal notranslate"><span class="pre">mypy</span></code>.</p></li>
<li><p class="linemarker linemarker-169"><code class="docutils literal notranslate"><span class="pre">setup_env.sh</span></code>: Script to create new conda environments; see <code class="docutils literal notranslate"><span class="pre">tools/setup_env.sh</span> <span class="pre">-h</span></code> for all available options.</p></li>
<li><p class="linemarker linemarker-170"><code class="docutils literal notranslate"><span class="pre">setup_miniconda.sh</span></code>: Script to install miniconda.</p></li>
</ul>
</li>
<li><p class="linemarker linemarker-172"><code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>: Files and folders ignored by <code class="docutils literal notranslate"><span class="pre">git</span></code>.</p></li>
<li><p class="linemarker linemarker-173"><code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code>: Configuration of pre-commit hooks, which are formatters and checkers run before a successful commit.</p></li>
<li><p class="linemarker linemarker-174"><code class="docutils literal notranslate"><span class="pre">AUTHORS.md</span></code>: Project authors.</p></li>
<li><p class="linemarker linemarker-175"><code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.md</span></code>: Instructions on how to contribute to the project.</p></li>
<li><p class="linemarker linemarker-176"><code class="docutils literal notranslate"><span class="pre">HISTORY.md</span></code>: List of changes for each version of the project.</p></li>
<li><p class="linemarker linemarker-177"><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>: License of the project.</p></li>
<li><p class="linemarker linemarker-178"><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code>: Files installed alongside the source code.</p></li>
<li><p class="linemarker linemarker-179"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>: Main package specification file, including build dependencies, metadata and the configurations of development tools like <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest</span></code>, <code class="docutils literal notranslate"><span class="pre">mypy</span></code> etc.</p></li>
<li><p class="linemarker linemarker-180"><code class="docutils literal notranslate"><span class="pre">README.md</span></code>: Description of the project.</p></li>
<li><p class="linemarker linemarker-181"><code class="docutils literal notranslate"><span class="pre">USAGE.md</span></code>: Information on how to use the package.</p></li>
</ul>
</section>
<section id="managing-dependencies">
<h2>Managing dependencies<a class="headerlink" href="#managing-dependencies" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-186">WeatherGraphNet uses <a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> to manage dependencies. (Also check out <a class="reference external" href="https://mamba.readthedocs.io/en/latest/">Mamba</a> if you like your package installations fast.) Dependencies are specified in YAML files, of which there are two:</p>
<ul class="simple">
<li><p class="linemarker linemarker-189"><code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code>: Top-level runtime and development dependencies with minimal version restrictions (typically a minimum version or a version range); kept manually.</p></li>
<li><p class="linemarker linemarker-190"><code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code>: Full tree of runtime and development dependencies with fully specified (‘pinned’) version numbers; created with <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">export</span></code>.</p></li>
</ul>
<p class="linemarker linemarker-192">The pinned <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file should be used to create reproducible environments for development or deployment. This ensures reproducible results across machines and users. The unpinned <code class="docutils literal notranslate"><span class="pre">requirements.yml</span></code> file has two main purposes: (i) keeping track of the top-level dependencies, and (ii) periodically updating the pinned <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file to the latest package versions.</p>
<p class="linemarker linemarker-194">After introducing new first-level dependencies to your requirements, you have to update the environment files in order to be able to create reproducible environments for deployment and production.
Updating the environment files involves the following steps:</p>
<ol class="arabic simple">
<li><p class="linemarker linemarker-198">Creating an environment from your top-level dependencies in <code class="docutils literal notranslate"><span class="pre">requirements/requirements.yml</span></code></p></li>
<li><p class="linemarker linemarker-199">Exporting this environment to <code class="docutils literal notranslate"><span class="pre">requirements/environment.yml</span></code></p></li>
</ol>
<p class="linemarker linemarker-201">Alternatively, use the provided script</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./tools/setup_env.sh<span class="w"> </span>-ue
</pre></div>
</div>
<p class="linemarker linemarker-207">to create a environment from unpinned (<code class="docutils literal notranslate"><span class="pre">-u</span></code>) runtime and development dependencies and export (<code class="docutils literal notranslate"><span class="pre">-e</span></code>) it (consider throwing in <code class="docutils literal notranslate"><span class="pre">-m</span></code> for good measure to speed things up with <code class="docutils literal notranslate"><span class="pre">mamba</span></code>).</p>
<p class="linemarker linemarker-209"><em>Note that the separation of unpinned runtime and development dependencies into separate files (``requirements.yml`` and ``dev-requirements.yml``, respectively) has been given up because when creating an environment from multiple YAML files (with ``conda env create`` and ``conda env update``), only the version restrictions in the last file are guaranteed to be respected, so when installing devevelopment dependencies from ``dev-requirements.yml`` into an environment created from ``requirements.yml``, the solver does not take version restrictions in the latter file into account anymore, potentially resulting in inconsistent production and development environments. Given the negligible overhead (in terms of memory etc.) of installing development dependencies in production environments, they are only separated from the runtime dependencies in ``requirements.yml`` by a comment.</em></p>
</section>
<section id="how-to-provide-executable-scripts">
<h2>How to provide executable scripts<a class="headerlink" href="#how-to-provide-executable-scripts" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-214">By default, a single executable script called weathergraphnet is provided. It is created when the package is installed. When you call it, the main function (<code class="docutils literal notranslate"><span class="pre">cli</span></code>) in <code class="docutils literal notranslate"><span class="pre">src/weathergraphnet/cli.py</span></code> is called.</p>
<p class="linemarker linemarker-216">When the package is installed, a executable script named <code class="docutils literal notranslate"><span class="pre">weathergraphnet</span></code> is created in the bin folder of the active conda environment. Upon calling this script in the shell, the <code class="docutils literal notranslate"><span class="pre">main</span></code> function in <code class="docutils literal notranslate"><span class="pre">src/weathergraphnet/cli.py</span></code> is executed.</p>
<p class="linemarker linemarker-218">The scripts, their names and entry points are specified in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> in the <code class="docutils literal notranslate"><span class="pre">[project.scripts]</span></code> section. Just add additional entries to provide more scripts to the users of your package.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">WeatherGraphNet</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">WeatherGraphNet to Generate Weather Model Ensemble Members</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types-of-contributions">Types of Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tips">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#project-structure">Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-dependencies">Managing dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-provide-executable-scripts">How to provide executable scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">Modules</a></li>
      <li>Next: <a href="authors.html" title="next chapter">Credits</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Simon Adamov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/contributing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>