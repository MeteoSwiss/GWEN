<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Installation &#8212; WeatherGraphNet 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="WeatherGraphNet: Simon Adamov’s WeatherGraphNet to Generate Weather Model Ensemble Members" href="readme.html" />

  <link rel="stylesheet" href="_static/custom.css" type="text/css" />


  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">


          <div class="body" role="main">

  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<p class="linemarker linemarker-7">There are two installation types, a production installation, which is static, and a development installation, which is editable.</p>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-13">To install WeatherGraphNet you need a miniconda installation. You can either set up your miniconda installation manually or use the script <cite>tools/setup_miniconda.sh</cite>, which will download and install the latest version of miniconda.</p>
</section>
<section id="installation-of-dependencies">
<h2>Installation of dependencies<a class="headerlink" href="#installation-of-dependencies" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-19">Dependencies are handled by the conda package manager. The goal of this step is to set up a conda environment according to the requirements of WeatherGraphNet. Note that by design, there are some dependencies already when you start developing the package, as the environment includes linters and other development tools.</p>
<p class="linemarker linemarker-21">The dependencies are handled in requirement files. Free installations are based on the <cite>requirements/requirements.yml</cite> file, where the top-level dependencies of the package are listed. Pinned installations are based on exported environments and stored in the file <cite>requirements/environment.yml</cite>.</p>
<p class="linemarker linemarker-23">Environments (based on either unpinned or pinned requirements) are handled by the script <cite>tools/setup_env.sh</cite>. The optional flag <cite>-u</cite> stands for unpinned installation:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>bash<span class="w"> </span>tools/setup_env.sh<span class="w"> </span>-u
</pre></div>
</div>
<p class="linemarker linemarker-29">This will create an up-to-date environment that can be exported to <cite>requirements/environment.yml</cite> with the optional flag <cite>-e</cite> (see below).</p>
<p class="linemarker linemarker-31">You can control the environment name with the flag <cite>-n</cite> and the Python version with <cite>-v</cite>. Run <code class="code docutils literal notranslate"><span class="pre">./tools/setup_env</span> <span class="pre">-h</span></code> for available options and defaults (incl. mamba support).</p>
</section>
<section id="installation-of-weathergraphnet">
<h2>Installation of WeatherGraphNet<a class="headerlink" href="#installation-of-weathergraphnet" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-37">After creating and activating your environment by running</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./tools/setup_env.sh
<span class="gp">$ </span>conda<span class="w"> </span>activate<span class="w"> </span>weathergraphnet
</pre></div>
</div>
<p class="linemarker linemarker-44">in the root folder of weathergraphnet, type</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-deps<span class="w"> </span>.
</pre></div>
</div>
<p class="linemarker linemarker-50">for a (static) production installation and</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>--no-deps<span class="w"> </span>--editable<span class="w"> </span>.
</pre></div>
</div>
<p class="linemarker linemarker-56">for a (editable) development installation.</p>
</section>
<section id="maintenance-of-the-environment-for-developers">
<h2>Maintenance of the environment (for developers)<a class="headerlink" href="#maintenance-of-the-environment-for-developers" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-62">If you need to add new first-level dependencies to your package, make sure to include them in <cite>requirements/requirements.yml</cite>. (Note that pip requirements can be added to these files in the <cite>- pip:</cite> section of the document.) After a (unpinned!) installation, this will change the full dependency tree and you need to export the environment. You can either do this by hand by activating the environment and then running</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda<span class="w"> </span>env<span class="w"> </span><span class="nb">export</span><span class="w"> </span>weathergraphnet<span class="w"> </span>requirements/environment.yml
</pre></div>
</div>
<p class="linemarker linemarker-68">or you can reinstall with the setup script from <cite>requirements/requirements.yml</cite> and directly export the environment with the <cite>-e</cite> flag.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./tools/setup_env<span class="w"> </span>-ue
</pre></div>
</div>
</section>
<section id="interaction-with-jenkins-and-github-actions">
<h2>Interaction with Jenkins and Github actions<a class="headerlink" href="#interaction-with-jenkins-and-github-actions" title="Permalink to this heading">¶</a></h2>
<p class="linemarker linemarker-78">Your package is always built on a Github actions server upon committing to the main branch. If your code goes into production, pinned production installations must be tested with Jenkins on CSCS machines. Templates may be found in the jenkins/ folder. Contact DevOps to help you set up your pipeline.</p>
</section>
</section>


          </div>

        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">WeatherGraphNet</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">WeatherGraphNet: Simon Adamov’s WeatherGraphNet to Generate Weather Model Ensemble Members</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparation">Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-of-dependencies">Installation of dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-of-weathergraphnet">Installation of WeatherGraphNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maintenance-of-the-environment-for-developers">Maintenance of the environment (for developers)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interaction-with-jenkins-and-github-actions">Interaction with Jenkins and Github actions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="readme.html" title="previous chapter">WeatherGraphNet: Simon Adamov’s WeatherGraphNet to Generate Weather Model Ensemble Members</a></li>
      <li>Next: <a href="usage.html" title="next chapter">Usage</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Simon Adamov.

      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>

      |
      <a href="_sources/installation.rst.txt"
          rel="nofollow">Page source</a>
    </div>




  </body>
</html>
